package org.unirender.asr.wholeword.recognizer;

import java.io.File;
import java.util.List;

import org.unirender.asr.wholeword.language.SupportedLanguages;


public class LiveSpeechRecognizer {

	String recordFile = "capturedaudio";
	SingleWordSpeechRecognizer recognizer;
	
	public LiveSpeechRecognizer (SupportedLanguages language,
			List<String> words) throws Exception{
		recognizer = new SingleWordSpeechRecognizer(language,words);
	}
	
	public LiveSpeechRecognizer (SupportedLanguages language)  throws Exception {
		recognizer = new SingleWordSpeechRecognizer(language);
	}
	
	
	public String listenAndRecognize() throws Exception{

		boolean caught= false;
		File waveFile = new File(recordFile + ".wav");
		try {
			//caught = AudioProcessor.waitForVoiceSignal(waveFile);
		} catch (Exception e) {
			System.out.println(">Error in audio capture .. going on");
		}
		String recognizedWord = null;
		if (caught) {
			recognizedWord = recognizer.recognize(waveFile);
			System.out.println(">Recognized "+recognizedWord+" ("+recognizer.getBestScore()+")");
		}
		
		if (recordFile.equals("capturedaudio"))
			recordFile = "capturedaudio1";
		else
			recordFile = "capturedaudio";

		System.out.println();
		return recognizedWord;
	}
}
